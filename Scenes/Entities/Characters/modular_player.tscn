[gd_scene load_steps=15 format=3 uid="uid://c8shnce8qcjg1"]

[ext_resource type="Script" uid="uid://yiq1rsrqelkx" path="res://Scripts/Entities/Player/modular_player.gd" id="1_pasck"]
[ext_resource type="PackedScene" uid="uid://dh0iwcla82oxe" path="res://Scenes/Components/gravity_component.tscn" id="3_pquip"]
[ext_resource type="PackedScene" uid="uid://jeonx45uyjyx" path="res://Scenes/Components/input_component.tscn" id="4_004tn"]
[ext_resource type="PackedScene" uid="uid://b5yt5rnkt12y" path="res://Scenes/Components/movement_component.tscn" id="5_tnlsu"]
[ext_resource type="PackedScene" uid="uid://dsctunjpgn1rg" path="res://Scenes/Components/advanced_jump_component.tscn" id="6_tnlsu"]
[ext_resource type="PackedScene" uid="uid://d322q8a7ysijw" path="res://Scenes/Components/dash_component.tscn" id="7_jore7"]
[ext_resource type="PackedScene" uid="uid://b0wnb03ylf8b4" path="res://Scenes/Components/rigidbody_component.tscn" id="8_34l16"]
[ext_resource type="PackedScene" uid="uid://bn4i636inu13d" path="res://Scenes/Components/HealthComponent.tscn" id="9_db018"]
[ext_resource type="PackedScene" uid="uid://bl1faxrpgk3n0" path="res://Scenes/Components/manipulate_component.tscn" id="10_db018"]
[ext_resource type="Texture2D" uid="uid://cw1mbu2oh2o3l" path="res://Assets/Robot.png" id="11_fo4vm"]
[ext_resource type="Script" path="res://Scripts/Entities/Player/modular_health.gd" id="11_u2hr2"]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_wjttw"]
size = Vector2(16.2876, 15)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_jore7"]
size = Vector2(22, 15.1092)

[sub_resource type="CircleShape2D" id="CircleShape2D_u2hr2"]
radius = 63.6946

[node name="ModularPlayer" type="CharacterBody2D" node_paths=PackedStringArray("gravity_component", "input_component", "movement_component", "jump_component", "dash_component", "rigidbody_component", "manipulate_component", "health_component")]
script = ExtResource("1_pasck")
gravity_component = NodePath("GravityComponent")
input_component = NodePath("InputComponent")
movement_component = NodePath("MovementComponent")
jump_component = NodePath("AdvancedJumpComponent")
dash_component = NodePath("DashComponent")
rigidbody_component = NodePath("RigidbodyComponent")
manipulate_component = NodePath("ManipulateComponent")
health_component = NodePath("HealthComponent")

[node name="CollisionShape2D" type="CollisionShape2D" parent="."]
position = Vector2(-0.143781, 0.5)
shape = SubResource("RectangleShape2D_wjttw")

[node name="DashArea2D" type="Area2D" parent="."]

[node name="CollisionShape2D" type="CollisionShape2D" parent="DashArea2D"]
position = Vector2(0, 0.445403)
shape = SubResource("RectangleShape2D_jore7")

[node name="ObjectManipulationArea2D" type="Area2D" parent="."]

[node name="CollisionShape2D" type="CollisionShape2D" parent="ObjectManipulationArea2D"]
shape = SubResource("CircleShape2D_u2hr2")

[node name="GravityComponent" parent="." instance=ExtResource("3_pquip")]
gravity = 800.0
boost = true

[node name="InputComponent" parent="." instance=ExtResource("4_004tn")]

[node name="MovementComponent" parent="." instance=ExtResource("5_tnlsu")]
speed = 50.0
ground_accel_speed = 10.0
ground_decel_speed = 5.0

[node name="AdvancedJumpComponent" parent="." instance=ExtResource("6_tnlsu")]
jump_velocity = -250.0

[node name="DashComponent" parent="." instance=ExtResource("7_jore7")]
speed = 250.0

[node name="RigidbodyComponent" parent="." instance=ExtResource("8_34l16")]

[node name="HealthComponent" parent="." instance=ExtResource("9_db018")]
health = 3.0
limit = Vector2(0, 3)

[node name="ManipulateComponent" parent="." instance=ExtResource("10_db018")]

[node name="HBoxContainer" type="HBoxContainer" parent="." node_paths=PackedStringArray("h1", "h2", "h3")]
anchors_preset = 7
anchor_left = 0.5
anchor_top = 1.0
anchor_right = 0.5
anchor_bottom = 1.0
offset_left = -9.0
offset_top = -16.0
offset_right = 9.0
offset_bottom = -12.0
grow_horizontal = 2
grow_vertical = 0
theme_override_constants/separation = 3
alignment = 1
script = ExtResource("11_u2hr2")
h1 = NodePath("h1")
h2 = NodePath("h2")
h3 = NodePath("h3")

[node name="h1" type="ColorRect" parent="HBoxContainer"]
layout_mode = 2
size_flags_horizontal = 3
color = Color(0.782728, 0, 0.246049, 1)

[node name="h2" type="ColorRect" parent="HBoxContainer"]
layout_mode = 2
size_flags_horizontal = 3
color = Color(0.784314, 0, 0.247059, 1)

[node name="h3" type="ColorRect" parent="HBoxContainer"]
layout_mode = 2
size_flags_horizontal = 3
color = Color(0.784314, 0, 0.247059, 1)

[node name="Sprite2D" type="Sprite2D" parent="."]
texture = ExtResource("11_fo4vm")

[connection signal="body_entered" from="DashArea2D" to="DashComponent" method="_on_area_entered"]
[connection signal="body_entered" from="ObjectManipulationArea2D" to="ManipulateComponent" method="_on_area_entered"]
[connection signal="body_exited" from="ObjectManipulationArea2D" to="ManipulateComponent" method="_on_area_exited"]
[connection signal="health_updated" from="HealthComponent" to="." method="_on_health_updated"]
[connection signal="health_updated" from="HealthComponent" to="HBoxContainer" method="_on_health_updated"]
